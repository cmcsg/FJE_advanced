FJE, but implemented using the iterator and visitor pattern.
